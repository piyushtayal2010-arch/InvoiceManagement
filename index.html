<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invoice Workspace</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <nav class="app-nav">
    <div class="nav-wrapper container">
      <button id="menu-toggle" class="menu-toggle" aria-label="Toggle menu">
        <i class="material-icons">menu</i>
      </button>
      <a href="#" class="brand-logo">Invoice Workspace</a>
    </div>
  </nav>

  <div class="app-shell">
    <aside class="sidebar">
      <a href="index.html" class="active-link"><i class="material-icons">receipt_long</i><span>Invoice Builder</span></a>
      <a href="clients.html"><i class="material-icons">groups</i><span>Clients</span></a>
      <a href="services.html"><i class="material-icons">inventory_2</i><span>Services</span></a>
      <a href="settings.html"><i class="material-icons">tune</i><span>Settings</span></a>
    </aside>

    <main class="main-content">
      <div class="page-header">
        <h4>Build Invoice</h4>
        <p>Create multi-line invoices with your own fields, taxes, totals and payment details.</p>
      </div>

      <div class="invoice-action-bar card">
        <div class="card-content action-row">
          <div class="action-left">
            <span id="dirtyState" class="dirty-state clean">All changes saved</span>
          </div>
          <div class="action-right">
            <button id="saveDraftBtn" class="btn secondary" type="button"><i class="material-icons left">save</i>Save Draft</button>
            <button class="btn secondary" type="button" onclick="previewPDF()"><i class="material-icons left">visibility</i>Preview PDF</button>
            <button class="btn" type="button" onclick="generatePDF()"><i class="material-icons left">download</i>Download PDF</button>
          </div>
        </div>
      </div>

      <div id="validationBanner" class="validation-banner hide"></div>

      <div class="card">
        <div class="card-content">
          <span class="card-title">Recent Drafts</span>
          <p class="section-help">Quickly continue previous invoices.</p>
          <ul id="draftList" class="collection draft-list"></ul>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <span class="card-title">Invoice Basics</span>
          <p class="section-help">All required fields must be filled before downloading.</p>
          <div class="row">
            <div class="input-field col s12 m3 invoice-no-group">
              <span id="invoicePrefixInline" class="invoice-prefix-inline"></span>
              <input id="invoiceNo" type="text">
              <label for="invoiceNo" class="active">Invoice No *</label>
            </div>
            <div class="input-field col s12 m3">
              <input id="invoiceDate" type="date">
              <label for="invoiceDate" class="active">Invoice Date *</label>
            </div>
            <div class="input-field col s12 m3">
              <input id="paymentTerms" type="number" min="0" step="1">
              <label for="paymentTerms">Payment Terms (days)</label>
            </div>
            <div class="input-field col s12 m3">
              <select id="currency">
                <option value="CAD">CAD</option>
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="INR">INR</option>
              </select>
              <label>Currency</label>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <span class="card-title">Bill To</span>
          <div class="row">
            <div class="input-field col s12 m4">
              <select id="clientSelect">
                <option value="" disabled selected>Choose client</option>
              </select>
              <label>Load from saved clients</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="clientName" type="text">
              <label for="clientName">Client Name *</label>
            </div>
            <div class="input-field col s12 m4">
              <input id="clientEmail" type="email">
              <label for="clientEmail">Client Email *</label>
            </div>
            <div class="input-field col s12 m6">
              <textarea id="clientAddress" class="materialize-textarea"></textarea>
              <label for="clientAddress">Address *</label>
            </div>
            <div class="input-field col s12 m6">
              <input id="clientPhone" type="text">
              <label for="clientPhone">Phone</label>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <span class="card-title">Invoice Items</span>
          <p class="section-help">Add services below, then review line items in the table.</p>
          <div class="row">
            <div class="input-field col s12 m3">
              <select id="serviceSelect">
                <option value="" disabled selected>Choose service</option>
              </select>
              <label>Load from saved services</label>
            </div>
            <div class="input-field col s12 m3">
              <input id="serviceName" type="text">
              <label for="serviceName">Service Name *</label>
            </div>
            <div class="input-field col s12 m3">
              <textarea id="serviceDesc" class="materialize-textarea"></textarea>
              <label for="serviceDesc">Description</label>
            </div>
            <div class="input-field col s12 m3">
              <input id="hsn" type="text">
              <label for="hsn">HSN/SKU</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col s12 m2">
              <input id="periodFrom" type="date">
              <label for="periodFrom" class="active">Service Period (From)</label>
            </div>
            <div class="input-field col s12 m2">
              <input id="periodTo" type="date">
              <label for="periodTo" class="active">Service Period (To)</label>
            </div>
            <div class="input-field col s12 m2">
              <input id="qty" type="number" min="0" step="1">
              <label for="qty">Qty *</label>
            </div>
            <div class="input-field col s6 m2">
              <input id="rate" type="number" min="0" step="0.01">
              <label for="rate">Rate *</label>
            </div>
            <div class="input-field col s6 m2">
              <input id="itemTax" type="number" min="0" step="0.01" value="0">
              <label for="itemTax" class="active">IGST %</label>
            </div>
            <div class="input-field col s12 m2 add-item-wrap">
              <button id="addItem" class="btn" type="button"><i class="material-icons left">add</i>Add Item</button>
            </div>
          </div>

          <div class="invoice-items-wrap hero-items">
            <table id="itemTable" class="striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Service</th>
                  <th>Qty</th>
                  <th>Rate</th>
                  <th>Tax %</th>
                  <th>Amount</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="itemTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-content">
          <span class="card-title">Totals & Notes</span>
          <div class="row totals-layout">
            <div class="col s12 m7">
              <div class="row">
                <div class="input-field col s12 m6">
                  <input id="discount" type="number" min="0" step="0.01" value="0">
                  <label for="discount" class="active">Discount (Flat)</label>
                </div>
                <div class="input-field col s12 m6">
                  <input id="shipping" type="number" min="0" step="0.01" value="0">
                  <label for="shipping" class="active">Shipping / Additional</label>
                </div>
              </div>
              <div class="input-field">
                <textarea id="invoiceNotes" class="materialize-textarea" style="height: 150px;"></textarea>
                <label for="invoiceNotes">Invoice Notes</label>
              </div>
            </div>
            <div class="col s12 m5">
              <div class="totals-summary-panel">
                <ul class="collection summary-list">
                  <li class="collection-item">Subtotal <span id="summarySubtotal" class="secondary-content">0.00</span></li>
                  <li class="collection-item">IGST <span id="summaryTax" class="secondary-content">0.00</span></li>
                  <li class="collection-item">Discount (Flat) <span id="summaryDiscount" class="secondary-content">0.00</span></li>
                  <li class="collection-item">Shipping / Additional <span id="summaryShipping" class="secondary-content">0.00</span></li>
                  <li class="collection-item">Grand Total <span id="summaryTotal" class="secondary-content"><strong>0.00</strong></span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="services.js"></script>
  <script src="clients.js"></script>
  <script src="app.js"></script>
  <script src="nav.js"></script>
</body>
</html>
